<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mapa Interactivo Territorios Montequinto</title>

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

  <!-- jQuery (JSONP / Apps Script) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<style>
  /* PANEL LATERAL */
#panel-detalle {
    position: fixed;
    top: 0;
    right: 0;
    width: 360px;
    max-width: 90%;
    height: 100vh;
    background: #fff;
    box-shadow: -4px 0 16px rgba(0,0,0,0.25);
    z-index: 5000;
    transform: translateX(100%);
    transition: transform 0.35s ease;
    display: flex;
    flex-direction: column;
}

#panel-detalle.activo {
    transform: translateX(0);
}

.panel-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #0057b8;
    color: white;
    padding: 12px 16px;
}

#panel-cerrar {
    background: transparent;
    border: none;
    color: white;
    font-size: 22px;
    cursor: pointer;
}

.panel-contenido {
    padding: 16px;
    overflow-y: auto;
    flex: 1;
}

#panel-imagen {
    width: 100%;
    height: auto;
    max-height: 420px;
    object-fit: contain;
    border-radius: 8px;
    margin-bottom: 12px;
}

/* MOVIL */
@media (max-width: 600px) {
    #panel-detalle {
        width: 100%;
        max-width: 100%;
    }
}

    /* Reset mínimo */
    html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
        font-family: Arial, Helvetica, sans-serif;
    }

    /* Contenedor del mapa */
    #mapa {
        width: 100vw !important;
        height: 100vh !important;
        max-width: 100% !important;
        position: relative !important;
        box-sizing: border-box !important;
        background: linear-gradient(180deg,#f8fafc,#e9eef6) !important;
    }

   /* POPUP más pequeño y responsive */
.leaflet-popup {
    max-width: 260px !important;
}

.leaflet-popup-content-wrapper {
    border-radius: 10px !important;
    padding: 8px !important;
    max-width: 240px !important;
}

.leaflet-popup-content {
    margin: 0 !important;
    font-size: 14px !important;
    line-height: 1.35 !important;
    max-width: 230px !important;
}

/* Imagen responsive */
.leaflet-popup-content img {
    width: 100% !important;
    height: auto !important;
    max-height: 180px !important;
    object-fit: contain !important;
    border-radius: 6px !important;
    display: block !important;
    margin-top: 6px !important;
}

/* MÓVILES */
@media (max-width: 600px) {
    .leaflet-popup {
        max-width: 200px !important;
    }

    .leaflet-popup-content-wrapper {
        max-width: 190px !important;
        padding: 6px !important;
    }

    .leaflet-popup-content img {
        max-height: 150px !important;
    }
}
  /* Visor de imagen grande */
.visor {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.85);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
}

.visor.activo {
    display: flex;
}

.visor img {
    max-width: 95%;
    max-height: 95%;
    border-radius: 10px;
}

/* Panel imagen más grande en móvil */
#panel-imagen {
    width: 100%;
    max-height: 380px;
    object-fit: cover;
    border-radius: 6px;
    cursor: pointer;
}


</style>


  <!-- ========================================================================== -->
</head>
<body>

  <div id="mapa"></div>
<!-- PANEL LATERAL PARA DETALLES -->
<div id="panel-detalle" class="panel-cerrado">
    <div class="panel-header">
        <h2 id="panel-titulo">Territorio</h2>
        <button id="panel-cerrar">✕</button>
    </div>
  
    <div class="panel-contenido">
        <img id="panel-imagen" src="" alt="Vista" />
        <p id="panel-estado"></p>

       <!-- Web App incrustada -->
    <iframe id="panel-webapp"
        style="width:100%; height:450px; border:0; border-radius:8px; display:none;">
    </iframe>
</div>

        
    </div>
</div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <!-- Tu JS (no lo modifico) — se espera que exista en la misma carpeta con ese nombre -->
  <script src="mapa.js"></script>

  <!-- Pequeño snippet de verificación: imprime versión y elementos clave en consola -->
  <script>
    console.log("index.html cargado: comprobar que mapa.js se ejecuta.");
    // Si quieres comprobar que el CSS nuevo está cargado:
    console.log("Computed #mapa height:", getComputedStyle(document.querySelector('#mapa')).height);
  </script>
  
<!-- VISOR DE IMAGEN (LIGHTBOX) -->
<div id="visor-imagen" class="visor" onclick="this.classList.remove('activo')">
    <img id="visor-img" src="">
</div>

</body>
</html>






